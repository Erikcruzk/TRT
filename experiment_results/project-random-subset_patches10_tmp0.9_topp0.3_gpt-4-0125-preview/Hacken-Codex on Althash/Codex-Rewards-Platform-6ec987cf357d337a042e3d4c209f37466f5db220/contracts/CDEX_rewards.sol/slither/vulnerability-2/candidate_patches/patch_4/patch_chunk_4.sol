function stake(uint256 amount)
    external
    nonReentrant
    notPaused
    updateReward(msg.sender)
{
    require(amount > 0, "Cannot stake 0");

    // Transfer the tokens from the sender's balance into the contract
    // The amount needs to be previously approved in the token contract
    bool success = CDEXToken.transferFrom(msg.sender, address(this), amount);
    require(success, "Transfer failed");

    _totalSupply = _totalSupply.add(amount);

    if(_balances[msg.sender] == 0) {
        totalMembers += 1;
        CDEXRanking.insert(amount, msg.sender);
    } else {
        CDEXRanking.remove(_balances[msg.sender], msg.sender);
        CDEXRanking.insert(_balances[msg.sender].add(amount), msg.sender);
    }

    _balances[msg.sender] = _balances[msg.sender].add(amount);

    emit Staked(msg.sender, amount);
}