function stake(uint256 amount)
    external
    nonReentrant
    notPaused
    updateReward(msg.sender)
{
    require(amount > 0);
    uint256 balanceBefore = CDEXToken.balanceOf(address(this));
    bool success = CDEXToken.transferFrom(msg.sender, address(this), amount);
    require(success);
    uint256 balanceAfter = CDEXToken.balanceOf(address(this));
    uint256 actualAmount = balanceAfter.sub(balanceBefore);
    
    _totalSupply = _totalSupply.add(actualAmount);
    
    if(_balances[msg.sender] == 0) {
        totalMembers += 1;
        CDEXRanking.insert(actualAmount, msg.sender);
    } else {
        CDEXRanking.remove(_balances[msg.sender], msg.sender);
        CDEXRanking.insert(_balances[msg.sender].add(actualAmount), msg.sender);
    }
    
    _balances[msg.sender] = _balances[msg.sender].add(actualAmount);
    
    emit Staked(msg.sender, actualAmount);
}