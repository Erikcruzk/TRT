function notifyRewardAmount(uint256 reward)
    public
    onlyOwner
    updateReward(address(0))
{
    reward = reward.mul(1e8);
    
    require(reward <= depositedRewardTokens.sub(reward.mul(loyaltyBonusTotal).div(10000)));
    
    uint256 newPeriodFinish = block.timestamp > periodFinish ? block.timestamp : periodFinish;
    if (newPeriodFinish != periodFinish) {
        rewardRate = reward.div(rewardsDuration);
    } else {
        uint256 remaining = periodFinish.sub(block.timestamp);
        uint256 leftover = remaining.mul(rewardRate);
        rewardRate = reward.add(leftover).div(rewardsDuration);
    }
    
    require(rewardRate <= depositedRewardTokens.div(rewardsDuration));
    
    lastUpdateTime = block.timestamp;
    
    periodFinish = newPeriodFinish.add(rewardsDuration);
    
    emit RewardAdded(reward);
}