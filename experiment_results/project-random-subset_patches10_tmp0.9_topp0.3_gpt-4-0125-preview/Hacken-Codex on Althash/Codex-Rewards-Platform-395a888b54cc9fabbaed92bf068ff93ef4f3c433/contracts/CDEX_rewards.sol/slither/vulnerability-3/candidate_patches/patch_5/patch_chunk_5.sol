function withdraw(uint256 amount)
    public
    nonReentrant
    updateReward(msg.sender)
{
    require(amount > 0);
    uint256 balanceBefore = CDEXToken.balanceOf(address(this));
    CDEXToken.transfer(msg.sender, amount);
    uint256 balanceAfter = CDEXToken.balanceOf(address(this));
    uint256 actualWithdrawAmount = balanceBefore.sub(balanceAfter);
    _totalSupply = _totalSupply.sub(actualWithdrawAmount);
    _balances[msg.sender] = _balances[msg.sender].sub(actualWithdrawAmount);
    if(_balances[msg.sender] == 0) {
        totalMembers -= 1;
    } else {
        CDEXRanking.remove(_balances[msg.sender].add(actualWithdrawAmount), msg.sender);
        CDEXRanking.insert(_balances[msg.sender], msg.sender);
    }
    emit Withdrawn(msg.sender, actualWithdrawAmount);
}