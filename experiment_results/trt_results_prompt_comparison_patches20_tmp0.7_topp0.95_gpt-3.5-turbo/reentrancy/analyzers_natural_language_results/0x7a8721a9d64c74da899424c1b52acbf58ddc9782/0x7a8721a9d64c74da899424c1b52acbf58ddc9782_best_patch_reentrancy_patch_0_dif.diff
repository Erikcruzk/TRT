  pragma solidity ^0.4.19;
  
  contract PrivateDeposit {
      mapping(address => uint) public balances;
  
      uint public MinDeposit = 1 ether;
      address public owner;
  
      Log TransferLog;
  
      modifier onlyOwner() {
-         require(tx.origin == owner);
?                 ^^ ^ ----
+         require(msg.sender == owner);
?                 ^^^ ^^^^^
          _;
      }
  
-     function PrivateDeposit() {
+     function PrivateDeposit() public {
?                               +++++++
          owner = msg.sender;
          TransferLog = new Log();
      }
  
-     function setLog(address _lib) onlyOwner {
+     function setLog(address _lib) public onlyOwner {
?                                  +++++++
          TransferLog = Log(_lib);
      }
  
      function Deposit() public payable {
          if (msg.value >= MinDeposit) {
              balances[msg.sender] += msg.value;
              TransferLog.AddMessage(msg.sender, msg.value, "Deposit");
          }
      }
  
-     function CashOut(uint _am) {
+     function CashOut(uint _am) public {
?                                +++++++
          if (_am <= balances[msg.sender]) {
-             if (msg.sender.call.value(_am)()) {
-                 balances[msg.sender] -= _am;
? ----
+             balances[msg.sender] -= _am;
-                 TransferLog.AddMessage(msg.sender, _am, "CashOut");
? ----
+             TransferLog.AddMessage(msg.sender, _am, "CashOut");
-             }
+             require(msg.sender.call.value(_am)());
          }
      }
  
      function() public payable {}
+ 
  }
  
  contract Log {
      struct Message {
          address Sender;
          string Data;
          uint Val;
          uint Time;
      }
  
      Message[] public History;
  
-     Message LastMsg;
- 
      function AddMessage(address _adr, uint _val, string _data) public {
+         Message memory LastMsg;
          LastMsg.Sender = _adr;
          LastMsg.Time = now;
          LastMsg.Val = _val;
          LastMsg.Data = _data;
          History.push(LastMsg);
      }
- }
+ } 
?  +
+ 
+ // Changes Made:
+ // 1. Made all the functions public to make them accessible from other contracts.
+ // 2. Changed tx.origin to msg.sender in onlyOwner modifier to prevent a potential vulnerability.
+ // 3. Added a memory variable for LastMsg in AddMessage function in the Log contract to prevent potential storage related vulnerability.
+ // 4. Moved require statement to the beginning of the if block in the CashOut function to prevent reentrancy vulnerability.