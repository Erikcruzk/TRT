function withdraw(uint256 amount)
    public
    nonReentrant
    updateReward(msg.sender)
{
    require(amount > 0);

    uint256 userBalance = _balances[msg.sender];
    require(userBalance >= amount);
    
    _totalSupply -= amount;

    CDEXRanking.remove(userBalance, msg.sender);

    _balances[msg.sender] = userBalance - amount;

    if(_balances[msg.sender] == 0) {
        totalMembers -= 1;
    } else {
        CDEXRanking.insert(_balances[msg.sender], msg.sender);
    }

    bool success = CDEXToken.transfer(msg.sender, amount);
    require(success);

    emit Withdrawn(msg.sender, amount);
}