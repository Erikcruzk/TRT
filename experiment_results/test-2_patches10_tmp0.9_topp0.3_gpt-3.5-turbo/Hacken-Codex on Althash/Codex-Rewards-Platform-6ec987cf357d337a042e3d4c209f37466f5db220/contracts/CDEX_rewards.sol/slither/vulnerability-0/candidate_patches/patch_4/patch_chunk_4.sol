function withdraw(uint256 amount) public nonReentrant updateReward(msg.sender) {
    require(amount > 0);

    _totalSupply = _totalSupply.sub(amount);

    CDEXRanking.remove(_balances[msg.sender], msg.sender);

    uint256 balanceBefore = _balances[msg.sender];
    _balances[msg.sender] = _balances[msg.sender].sub(amount);

    if(balanceBefore == amount) {
        totalMembers -= 1;
    } else {
        CDEXRanking.insert(_balances[msg.sender], msg.sender);
    }

    bool success = CDEXToken.transferFrom(msg.sender, address(this), amount);
    require(success);

    emit Withdrawn(msg.sender, amount);
}