function donate(address _donor, address _returnAddress, bytes32 checksum) payable only_during_period is_not_dust {
	
	if (!(sha3(bytes32(_donor)^bytes32(_returnAddress)) == checksum)) throw;

	// calculate the number of atoms at the current rate
	var atoms = msg.value * atomRate;

	// update the donor details
	record[_donor] += atoms;
	returnAddresses[_donor] = _returnAddress; 

	// update the totals
	totalEther += msg.value;
	totalAtom += atoms;

	// forward the funds to the treasurer securely to prevent re-entrancy
	(bool sent, ) = treasury.call{value: msg.value}("");
	if (!sent) throw;

	Received(_donor, msg.value, atomRate);
}