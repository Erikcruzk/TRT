function fairShare(uint256 balance, uint256 shares, uint256 totalShares) internal pure returns (uint256) {
    require(totalShares != 0);

    if (balance == 0) { return 0; }

    uint256 prod = balance.mul(shares);

    if (prod / balance == shares) { 
        return prod.div(totalShares);
    }

    return (balance.div(totalShares)).mul(shares);
}