function _callTokensReceived(
    address operator,
    address from,
    address to,
    uint256 amount,
    bytes memory userData,
    bytes memory operatorData,
    bool requireReceptionAck
)
    private
{
    address implementer = _ERC1820_REGISTRY.getInterfaceImplementer(to, _TOKENS_RECIPIENT_INTERFACE_HASH);
    if (implementer != address(0)) {
        bool currentReentrancyGuard = _reentrancyGuard;
        _reentrancyGuard = false;
        IERC777Recipient(implementer).tokensReceived(operator, from, to, amount, userData, operatorData);
        _reentrancyGuard = currentReentrancyGuard;
    } else if (requireReceptionAck) {
        require(!to.isContract(), "ERC777: token recipient contract has no implementer for ERC777TokensRecipient");
    }
}