function _checkOnERC721Received(
    address from,
    address to,
    uint256 tokenId,
    bytes memory data
)
    private returns (bool)
{
    if (to.isContract()) {
        bytes memory returndata = to.functionCall(abi.encodeWithSelector(
            IERC721Receiver(to).onERC721Received.selector,
            _msgSender(),
            from,
            tokenId,
            data
        ), "ERC721: transfer to non ERC721Receiver implementer");
        bytes4 retval = abi.decode(returndata, (bytes4));
        return (retval == IERC721Receiver.onERC721Received.selector);
    } else {
        return true;
    }
}