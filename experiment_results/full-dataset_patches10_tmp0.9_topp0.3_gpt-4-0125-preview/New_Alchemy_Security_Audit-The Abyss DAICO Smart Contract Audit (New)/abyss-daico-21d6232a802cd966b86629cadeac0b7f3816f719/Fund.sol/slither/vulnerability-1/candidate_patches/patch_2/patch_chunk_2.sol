function onCrowdsaleEnd() external onlyCrowdsale {
    state = FundState.TeamWithdraw;
    ISimpleCrowdsale crowdsale = ISimpleCrowdsale(crowdsaleAddress);
    firstWithdrawAmount = safeDiv(crowdsale.getSoftCap(), 2);
    lastWithdrawTime = block.timestamp; // Updated to use block.timestamp
    tap = INITIAL_TAP;
    crowdsaleEndDate = block.timestamp; // Updated to use block.timestamp
}