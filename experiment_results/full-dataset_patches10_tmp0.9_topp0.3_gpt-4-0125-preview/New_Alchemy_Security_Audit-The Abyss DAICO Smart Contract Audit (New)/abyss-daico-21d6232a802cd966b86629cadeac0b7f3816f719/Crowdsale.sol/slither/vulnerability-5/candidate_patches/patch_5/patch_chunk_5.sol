function processPayment(address contributor, uint256 etherAmount, uint256 tokenAmount, uint256 tokenBonusAmount, bool additionalBonusApplied) internal {
    uint256 tokenTotalAmount = safeAdd(tokenAmount, tokenBonusAmount);

    totalEtherContributed = safeAdd(totalEtherContributed, etherAmount);
    userTotalContributed[contributor] = safeAdd(userTotalContributed[contributor], etherAmount);
    
    token.issue(contributor, tokenTotalAmount);
    fund.processContribution.value(etherAmount)(contributor);
    
    LogContribution(contributor, etherAmount, tokenAmount, tokenBonusAmount, additionalBonusApplied, now);
}