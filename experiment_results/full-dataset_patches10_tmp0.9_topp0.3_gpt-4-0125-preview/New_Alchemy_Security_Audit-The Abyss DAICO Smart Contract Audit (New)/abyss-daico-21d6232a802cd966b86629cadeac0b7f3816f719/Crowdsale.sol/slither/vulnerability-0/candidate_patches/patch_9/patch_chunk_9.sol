function releaseTokens() public {
    uint256 len = walletTokens[msg.sender].length;
    for(uint256 i = 0; i < len; i++) {
        if(!walletTokens[msg.sender][i].released && now >= walletTokens[msg.sender][i].lockEndTime) {
            walletTokens[msg.sender][i].released = true;
            uint256 amount = walletTokens[msg.sender][i].amount;
            require(token.transfer(msg.sender, amount));
            TokensUnlocked(msg.sender, amount);
        }
    }
}