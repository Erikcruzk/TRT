function releaseTokens() public {
    require(walletTokens[msg.sender].length > 0);

    uint256 i = 0;
    while(i < walletTokens[msg.sender].length) {
        if(!walletTokens[msg.sender][i].released && now >= walletTokens[msg.sender][i].lockEndTime) {
            walletTokens[msg.sender][i].released = true;
            token.transfer(msg.sender, walletTokens[msg.sender][i].amount);
            TokensUnlocked(msg.sender, walletTokens[msg.sender][i].amount);
        }
        i++;
    }
}