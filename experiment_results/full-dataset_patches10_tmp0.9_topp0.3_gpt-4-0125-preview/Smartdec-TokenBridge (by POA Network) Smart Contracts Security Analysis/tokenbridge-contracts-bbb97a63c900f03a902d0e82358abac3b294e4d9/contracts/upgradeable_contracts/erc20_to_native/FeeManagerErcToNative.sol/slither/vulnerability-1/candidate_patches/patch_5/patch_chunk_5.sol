function distributeFeeProportionally(uint256 _fee, bytes32 _direction) internal {
    IRewardableValidators validators = rewardableValidatorContract();
    address F_ADDR = 0xFFfFfFffFFfffFFfFFfFFFFFffFFFffffFfFFFfF;
    uint256 numOfValidators = validators.validatorCount();

    uint256 feePerValidator = _fee.div(numOfValidators);

    uint256 randomValidatorIndex = 0; // Initialized
    uint256 diff = _fee.sub(feePerValidator.mul(numOfValidators));
    if (diff > 0) {
        randomValidatorIndex = random(numOfValidators);
    }

    address nextValidator = validators.getNextValidator(F_ADDR);
    require((nextValidator != F_ADDR) && (nextValidator != address(0)));

    uint256 i = 0;
    while (nextValidator != F_ADDR) {
        uint256 feeToDistribute = feePerValidator;
        if (diff > 0 && randomValidatorIndex == i) {
            feeToDistribute = feeToDistribute.add(diff);
        }

        address rewardAddress = validators.getValidatorRewardAddress(nextValidator);
        onFeeDistribution(rewardAddress, feeToDistribute, _direction);

        nextValidator = validators.getNextValidator(nextValidator);
        require(nextValidator != address(0));
        i = i + 1;
    }
}