function beginMigration(address operator, address from, address to, uint256 amount, bytes calldata userData, bytes calldata operatorData) external {
    require(_migrationStarted, "Migration has not been started yet");
    require(_migrationOperator == msg.sender, "Only the migration operator can migrate tokens");
    
    // Ensure this function can't be re-entered during execution
    _migrationStarted = false;

    IERC777Recipient(implementer).tokensReceived(operator, from, to, amount, userData, operatorData);

    // Re-enable migration once the sensitive operation is completed
    _migrationStarted = true;
}