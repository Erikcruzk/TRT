function beginMigration() external onlyOwner {
    require(!migrationStarted, "Migration has already begun");
    migrationStarted = true;

    uint256 rOwnedSupply = rOwned[address(this)];
    uint256 tOwnedSupply = tOwned[address(this)];
    uint256 rate = getRate();

    uint256 rOwnedMigrated;
    uint256 tOwnedMigrated;

    for (uint i = 0; i < holders.length; i++) {
        address holder = holders[i];
        if (holder == address(0)) continue;

        uint256 rOwnedBalance = rOwned[holder];
        uint256 tOwnedBalance = tOwned[holder];
        if (rOwnedBalance > 0) {
            rOwnedMigrated = rOwnedMigrated.add(rOwnedBalance);
            rOwned[holder] = 0;
            rOwned[newContract] = rOwned[newContract].add(rOwnedBalance);
        }
        if (tOwnedBalance > 0) {
            tOwnedMigrated = tOwnedMigrated.add(tOwnedBalance);
            tOwned[holder] = 0;
            tOwned[newContract] = tOwned[newContract].add(tOwnedBalance);
        }
    }
    rOwned[address(this)] = rOwnedSupply.sub(rOwnedMigrated);
    tOwned[address(this)] = tOwnedSupply.sub(tOwnedMigrated);
    totalFees = totalFees.add(tOwnedMigrated.div(rate));
}