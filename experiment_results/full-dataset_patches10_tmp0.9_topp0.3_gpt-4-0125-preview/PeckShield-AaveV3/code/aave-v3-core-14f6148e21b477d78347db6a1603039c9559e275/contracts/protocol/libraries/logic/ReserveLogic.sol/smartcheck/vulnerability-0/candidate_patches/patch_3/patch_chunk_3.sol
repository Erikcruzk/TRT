function beginMigration(address targetPoolAddress) external payable nonReentrant {
    require(migrationTimestamp == 0, "Migration already started");
    require(msg.sender == address(lendingPool), "Caller must be lending pool");

    uint40 currentTimestamp = uint40(block.timestamp);
    migrationTimestamp = currentTimestamp;

    address payable treasuryAddress = address(uint160(addressesProvider.getTreasuryAddress()));
    
    if (address(this).balance > 0) {
      Address.sendValue(treasuryAddress, address(this).balance);
    }

    emit BeginMigration(targetPoolAddress, treasuryAddress, currentTimestamp);
  }