function approve(address spender, uint256 amount) public virtual override returns (bool) {
    require(spender != address(0), "ERC20: approve to the zero address");
    
    // To mitigate the front-running attack, we first set the allowance to 0
    // and then update it to the new amount, if and only if the previous allowance
    // was also zero. This prevents attacks related to changing allowances.
    // However, it requires clients to first set allowances to 0 before changing them,
    // which needs to be clearly communicated to users.
    require(amount == 0 || _allowances[_msgSender()][spender] == 0, "ERC20: approve from non-zero to non-zero allowance");
    _approve(_msgSender(), spender, amount);
    return true;
}