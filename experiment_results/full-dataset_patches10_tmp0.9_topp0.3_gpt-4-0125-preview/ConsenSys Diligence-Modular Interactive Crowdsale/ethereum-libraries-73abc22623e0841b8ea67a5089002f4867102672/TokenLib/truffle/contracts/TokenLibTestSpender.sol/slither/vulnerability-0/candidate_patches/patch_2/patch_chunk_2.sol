function approveChange (TokenStorage storage self, address _spender, uint256 _valueChange, bool _increase)
                          public returns (bool)
  {
    uint256 _newAllowed = self.allowed[msg.sender][_spender]; // Initialized based on the current allowed value
    bool err;

    if(_increase) {
      (err, _newAllowed) = _newAllowed.plus(_valueChange);
      require(!err);

      self.allowed[msg.sender][_spender] = _newAllowed;
    } else {
      if (_valueChange > _newAllowed) {
        _newAllowed = 0; // Explicitly set to 0 if the decrease is more than what's currently allowed
      } else {
        _newAllowed = _newAllowed - _valueChange;
      }
      self.allowed[msg.sender][_spender] = _newAllowed;
    }

    Approval(msg.sender, _spender, _newAllowed);
    return true;
  }