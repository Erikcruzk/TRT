function uniq(uint16[] storage self) public returns (uint256 length) {
    if(self.length > 1){
        for (uint256 i = 1; i < self.length; i++) {
            uint16 value = self[i];
            uint256 j;
            for (j = i-1; (int(j) >= 0) && (self[j] > value); j--) {
                self[j + 1] = self[j];
            }
            self[j + 1] = value;
        }

        uint256 newSize = 1;
        for (uint256 i = 1; i < self.length; i++) {
            if (self[i-1] != self[i]) {
                self[newSize] = self[i];
                newSize++;
            }
        }

        for (uint256 i = newSize; i < self.length; i++) {
            delete self[i];
        }
        self.length = newSize;
    }

    length = self.length;
}