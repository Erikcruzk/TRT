function uniq(uint256[] storage self) public returns (uint256 length) {
    if(self.length > 1){
        for(uint256 i = 1; i < self.length; /* i updated inside */) {
            bool exists = false;
            for(uint256 j = 0; j < i; j++) {
                if(self[i] == self[j]) {
                    exists = true;
                    break;
                }
            }
            if(exists) {
                for(uint256 k = i; k < self.length-1; k++) {
                    self[k] = self[k+1];
                }
                delete self[self.length-1];
                self.length--;
            } else {
                i++;
            }
        }
    }
    length = self.length;
}