function uniq(uint8[] storage self) public returns (uint256 length) {
    for (uint256 i = 0; i < self.length; i++) {
        bool duplicate = false;
        for (uint256 j = 0; j < i; j++) {
            if (self[j] == self[i]) {
                duplicate = true;
                break;
            }
        }
        if (duplicate) {
            for (uint256 k = i; k < self.length - 1; k++) {
                self[k] = self[k + 1];
            }
            delete self[self.length - 1];
            self.length--;
            i--;
        }
    }
    length = self.length;
}