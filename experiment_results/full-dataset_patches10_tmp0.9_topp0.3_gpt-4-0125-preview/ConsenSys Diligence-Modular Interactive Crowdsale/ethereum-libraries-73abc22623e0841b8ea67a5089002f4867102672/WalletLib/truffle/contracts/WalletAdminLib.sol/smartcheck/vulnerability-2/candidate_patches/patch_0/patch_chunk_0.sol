function uniq(uint256[] storage self) public returns (uint256 length) {
    for (uint256 i = 0; i < self.length; i++) {
        bool contains = false;
        for (uint256 j = 0; j < i; j++) {
            if (self[j] == self[i]) {
                contains = true;
                break;
            }
        }

        if (!contains) {
            if (i != length) {
                // This effectively removes duplicates by moving unique elements towards the front of the array
                self[length] = self[i];
            }
            length++;
        }
    }

    while (self.length > length) {
        self.pop(); // Reduces the array size but doesn't clear the removed element
    }
}