function memcpy(uint dest, uint src, uint len) private pure {
    // For large chunks, copy 32 bytes at a time
    for(; len >= 32; len -= 32) {
        assembly {
            mstore(dest, mload(src))
        }
        dest += 32;
        src += 32;
    }

    // Copy remaining bytes
    // Avoid the shadowing issue by using a different variable name (mask)
    uint maskRemaining = 256 ** (32 - len) - 1;
    assembly {
        let srcpart := and(mload(src), not(maskRemaining))
        let destpart := and(mload(dest), maskRemaining)
        mstore(dest, or(destpart, srcpart))
    }
}