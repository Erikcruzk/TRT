function approveChange (TokenStorage storage self, address _spender, uint256 _valueChange, bool _increase)
                          public returns (bool)
{
    uint256 _newAllowed = self.allowed[msg.sender][_spender];
    bool err;

    if(_increase) {
      (err, _newAllowed) = self.allowed[msg.sender][_spender].plus(_valueChange);
      require(!err);
    } else {
      if (_valueChange > self.allowed[msg.sender][_spender]) {
        _newAllowed = 0;
      } else {
        _newAllowed = self.allowed[msg.sender][_spender] - _valueChange;
      }
    }

    self.allowed[msg.sender][_spender] = _newAllowed;
    Approval(msg.sender, _spender, _newAllowed);
    return true;
}