function registerUser(EvenDistroCrowdsaleStorage storage self, address _registrant)
                        public
                        returns (bool)
  {
    require((msg.sender == self.base.owner) || (msg.sender == address(this)));
    
    
    if ((!self.staticCap) && (now >= self.base.startTime - 2 hours)) {
      LogRegError(_registrant, "Can only register users earlier than 2 hours before the sale!");
      return false;
    }
    if(self.isRegistered[_registrant]) {
      LogRegError(_registrant, "Registrant address is already registered for the sale!");
      return false;
    }

    uint256 result;
    bool err;

    self.isRegistered[_registrant] = true;
    (err,result) = self.numRegistered.plus(1);
    require(!err);
    self.numRegistered = result;

    LogUserRegistered(_registrant);

    return true;
  }