function setTokens() public returns (bool) {
    require(msg.sender == sale.base.owner);
    require(!sale.base.tokensSet, "Tokens have already been set.");
    require(now < sale.base.endTime, "Cannot set tokens after sale end time.");

    uint256 _tokenBalance;
 
    _tokenBalance = sale.base.token.balanceOf(address(this));
    sale.base.withdrawTokensMap[msg.sender] = _tokenBalance;
    sale.base.startingTokenBalance = _tokenBalance;
    sale.base.tokensSet = true;

    return true;
}