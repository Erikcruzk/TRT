function beginMigration(CrowdsaleStorage storage self) public returns (bool) {
    uint256 index = 0; // Local variable initialized to 0 to fix the vulnerability
    require(msg.sender == self.owner);
    require(crowdsaleEnded(self));
    require(self.token.balanceOf(this) == 0);

    for(uint256 i = 0; i < self.milestoneTimes.length; i++) {
      if(now >= self.milestoneTimes[i]) {
        index = i;
      }
    }

    self.startTime = self.milestoneTimes[index];
    self.tokensPerEth = self.saleData[self.milestoneTimes[index]][0];
    return true;
  }