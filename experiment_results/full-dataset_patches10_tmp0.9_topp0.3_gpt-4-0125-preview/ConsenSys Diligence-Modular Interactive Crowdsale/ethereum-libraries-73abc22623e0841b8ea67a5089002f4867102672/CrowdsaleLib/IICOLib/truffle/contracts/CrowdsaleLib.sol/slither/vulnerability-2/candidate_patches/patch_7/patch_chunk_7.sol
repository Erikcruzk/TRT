function setTokens(CrowdsaleStorage storage self) public returns (bool) {
    require(msg.sender == self.owner);
    require(!self.tokensSet);
    require(now < self.endTime);

    uint256 tokenBalance;

    tokenBalance = self.token.balanceOf(this);
    self.withdrawTokensMap[msg.sender] = tokenBalance;
    self.startingTokenBalance = tokenBalance;
    self.tokensSet = true;

    return true;
}