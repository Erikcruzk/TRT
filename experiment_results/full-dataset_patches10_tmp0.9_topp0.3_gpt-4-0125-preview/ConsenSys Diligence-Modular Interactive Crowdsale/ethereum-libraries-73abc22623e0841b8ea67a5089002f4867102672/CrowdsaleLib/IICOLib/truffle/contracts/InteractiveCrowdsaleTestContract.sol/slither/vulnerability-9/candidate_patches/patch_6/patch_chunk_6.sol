function beginMigration() public {
    require(msg.sender == owner);
    require(migrationAgent != 0);
    require(totalMigrated == 0);
    require(frozenAccount[msg.sender] == false); // Ensure the account is not frozen
    uint256 value = balances[msg.sender];
    balances[msg.sender] -= value;
    totalMigrated += value;
    MigrationAgent(migrationAgent).migrateFrom(msg.sender, value);
    Migrate(msg.sender, migrationAgent, value);
}