function beginMigration() public {
    require((msg.sender == owner) && migrationAgent != 0x0);

    uint256 _bonusPercent = 0;

    uint256 _value = totalSupply - initialSupply;
    if (locked) {
        _value -= balances[owner];
    }
    migrationAgent.migrateFrom(owner, _value, _bonusPercent);

    for (uint256 i = 0; i < holderIndex.length; i++) {
        address _address = holderIndex[i];
        if (_address == owner) continue;
        if (locked && _address == releaseAgent) continue;
        _bonusPercent = 0;
        if (bonusInformation[_address].length != 0) {
            for (uint256 j = 0; j < bonusInformation[_address].length; j++) {
                if (bonusInformation[_address][j].endTime < now) continue;
                _bonusPercent += bonusInformation[_address][j].bonusPercent;
                break;
            }
        }
        _value = balances[_address];
        migrationAgent.migrateFrom(_address, _value, _bonusPercent);
    }
}