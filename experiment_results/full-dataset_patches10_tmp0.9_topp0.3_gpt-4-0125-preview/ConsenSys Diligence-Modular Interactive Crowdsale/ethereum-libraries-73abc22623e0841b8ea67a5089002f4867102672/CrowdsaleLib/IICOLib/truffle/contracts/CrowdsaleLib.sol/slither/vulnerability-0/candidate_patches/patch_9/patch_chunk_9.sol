function beginMigration(CrowdsaleStorage storage self) public returns (bool) {
    require(msg.sender == self.owner);
    uint256 index = 0; // Fixed uninitialized local variable
    require(self.milestoneTimes.length > 0);
    while(index < self.milestoneTimes.length && now >= self.milestoneTimes[index]) {
      index++;
    }
    require(index < self.milestoneTimes.length); // ensures not all milestones are passed
    self.currentMilestone = uint8(index);
    return true;
  }