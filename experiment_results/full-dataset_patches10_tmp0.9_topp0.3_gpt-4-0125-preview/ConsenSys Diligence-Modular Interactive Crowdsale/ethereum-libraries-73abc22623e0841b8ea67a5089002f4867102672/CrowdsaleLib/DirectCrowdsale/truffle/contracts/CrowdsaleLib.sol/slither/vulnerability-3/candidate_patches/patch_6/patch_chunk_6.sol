function setTokens(CrowdsaleStorage storage self) public returns (bool) {
  require(msg.sender == self.owner);
  require(!self.tokensSet);
  require(now < self.endTime);

  uint256 _tokenBalance;

  _tokenBalance = self.token.balanceOf(this);
  self.withdrawTokensMap[msg.sender] = _tokenBalance;
  self.startingTokenBalance = _tokenBalance;
  self.tokensSet = true;

  return true;
}