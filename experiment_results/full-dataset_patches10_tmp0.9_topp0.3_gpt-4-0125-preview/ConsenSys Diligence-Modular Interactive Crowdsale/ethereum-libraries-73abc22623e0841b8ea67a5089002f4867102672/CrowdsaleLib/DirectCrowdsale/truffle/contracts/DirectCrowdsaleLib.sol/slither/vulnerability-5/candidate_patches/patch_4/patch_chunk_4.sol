function beginMigration() public {
    require(msg.sender == owner);
    require(migrationAgent != 0);
    require(totalSupply != 0);
    require(!finalized);

    uint256 _decimals = decimals; // Fixed shadowing by changing the variable name

    uint256 value = balances[msg.sender];
    balances[msg.sender] -= value;
    totalSupply -= value;
    totalMigrated += value;
    MigrationAgent(migrationAgent).migrateFrom(msg.sender, value);
    Migrate(msg.sender, migrationAgent, value);
}