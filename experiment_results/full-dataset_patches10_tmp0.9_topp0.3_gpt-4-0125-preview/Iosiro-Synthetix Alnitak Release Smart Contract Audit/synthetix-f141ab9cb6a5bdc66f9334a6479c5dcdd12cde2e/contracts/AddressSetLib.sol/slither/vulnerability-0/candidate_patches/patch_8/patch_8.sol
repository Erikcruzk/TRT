pragma solidity ^0.5.16;


function getPage(
    AddressSet storage set,
    uint index,
    uint pageSize
) internal view returns (address[] memory) {
    
    uint endIndex = index + pageSize;

    if (endIndex > set.elements.length) {
        endIndex = set.elements.length;
    }
    if (endIndex <= index) {
        return new address[](0);
    }

    uint n = endIndex - index; 
    address[] memory page = new address[](n);
    for (uint i = 0; i < n; i++) {
        page[i] = set.elements[i + index];
    }
    return page;
}