function remove(bytes32 element) internal {
    require(contains(set, element), "Element not in set.");

    uint index = set.indices[element];
    uint lastIndex = set.elements.length - 1; 
    if (index != lastIndex) {
        
        bytes32 shiftedElement = set.elements[lastIndex];
        set.elements[index] = shiftedElement;
        set.indices[shiftedElement] = index;
    }
    set.elements.pop();
    delete set.indices[element];
}