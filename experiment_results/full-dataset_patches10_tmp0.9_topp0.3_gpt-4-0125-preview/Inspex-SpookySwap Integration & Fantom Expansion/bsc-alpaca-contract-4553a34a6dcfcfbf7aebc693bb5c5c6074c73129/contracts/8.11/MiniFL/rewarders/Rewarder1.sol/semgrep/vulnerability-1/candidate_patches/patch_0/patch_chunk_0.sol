function onWithdraw(
    uint256 _pid,
    address _user,
    uint256, 
    uint256 _newAmount
  ) external override nonReentrant onlyFL {
    PoolInfo memory pool = _updatePool(_pid);
    UserInfo storage user = userInfo[_pid][_user];

    if (user.amount > _newAmount) {
      
      uint256 _amount = user.amount - _newAmount;

      user.rewardDebt = user.rewardDebt - ((_amount * pool.accRewardPerShare) / ACC_REWARD_PRECISION).toInt256();
      user.amount = _newAmount;

      emit LogOnWithdraw(_user, _pid, _amount);
    } else {
      
      
      uint256 _amount = 0;
      user.amount = _newAmount;
      user.rewardDebt = user.rewardDebt + ((_amount * pool.accRewardPerShare) / ACC_REWARD_PRECISION).toInt256();

      emit LogOnDeposit(_user, _pid, _amount);
    }
  }