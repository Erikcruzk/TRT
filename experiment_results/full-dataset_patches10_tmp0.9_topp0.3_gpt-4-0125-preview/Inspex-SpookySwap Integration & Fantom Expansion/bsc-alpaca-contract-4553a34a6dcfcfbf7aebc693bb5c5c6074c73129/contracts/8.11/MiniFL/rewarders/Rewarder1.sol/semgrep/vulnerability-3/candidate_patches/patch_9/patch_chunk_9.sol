function onDeposit(
    uint256 _pid,
    address _user,
    uint256, // ignored parameter
    uint256 _newAmount
) external override nonReentrant onlyFL {
    PoolInfo memory pool = _updatePool(_pid);
    UserInfo storage user = userInfo[_pid][_user];
    uint256 previousAmount = user.amount;
    if (_newAmount < previousAmount) {
        uint256 _amount = previousAmount - _newAmount;
        user.rewardDebt = user.rewardDebt - ((_amount * pool.accRewardPerShare) / ACC_REWARD_PRECISION).toInt256();
        user.amount = _newAmount;
        emit LogOnWithdraw(_user, _pid, _amount);
    } else if (_newAmount > previousAmount) {
        uint256 _amount = _newAmount - previousAmount;
        user.amount = _newAmount;
        user.rewardDebt = user.rewardDebt + ((_amount * pool.accRewardPerShare) / ACC_REWARD_PRECISION).toInt256();
        emit LogOnDeposit(_user, _pid, _amount);
    }
}