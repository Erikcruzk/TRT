function onWithdraw(
    uint256 _pid,
    address _user,
    uint256, 
    uint256 _newAmount
  ) external override nonReentrant onlyFL {
    PoolInfo memory pool = _updatePool(_pid);
    UserInfo storage user = userInfo[_pid][_user];

    uint256 _amount = 0;
    if (user.amount >= _newAmount) {
      
      _amount = user.amount - _newAmount;

      user.rewardDebt = user.rewardDebt - int256((_amount * pool.accRewardPerShare) / ACC_REWARD_PRECISION);
      user.amount = user.amount - _amount;

      emit LogOnWithdraw(_user, _pid, _amount);
    } else {
      
      
      user.amount = _newAmount;
      user.rewardDebt = user.rewardDebt + int256((_newAmount * pool.accRewardPerShare) / ACC_REWARD_PRECISION);

      emit LogOnDeposit(_user, _pid, _newAmount);
    }
  }