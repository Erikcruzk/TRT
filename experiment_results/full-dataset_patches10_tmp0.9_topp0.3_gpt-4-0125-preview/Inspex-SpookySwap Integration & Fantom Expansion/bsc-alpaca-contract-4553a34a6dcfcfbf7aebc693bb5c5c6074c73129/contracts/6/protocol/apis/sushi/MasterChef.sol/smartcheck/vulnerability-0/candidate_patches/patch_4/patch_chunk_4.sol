function safeApprove(
    IERC20 token,
    address spender,
    uint256 value
) internal {
    // Mitigate the race condition
    uint256 currentAllowance = token.allowance(address(this), spender);
    if (currentAllowance > 0) {
        require(token.approve(spender, 0), "SafeERC20: reset allowance failed");
    }
    require(token.approve(spender, value), "SafeERC20: approve failed");
}