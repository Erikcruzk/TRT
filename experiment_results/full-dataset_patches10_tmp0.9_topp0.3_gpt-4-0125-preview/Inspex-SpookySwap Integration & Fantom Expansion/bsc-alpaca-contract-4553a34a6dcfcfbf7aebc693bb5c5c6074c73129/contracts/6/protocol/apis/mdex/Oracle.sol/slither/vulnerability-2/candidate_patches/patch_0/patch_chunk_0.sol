function update(address tokenA, address tokenB) external {
    address pair = IMdexFactory(factory).pairFor(tokenA, tokenB);

    Observation storage observation = pairObservations[pair];
    uint256 timeElapsed = block.timestamp - observation.timestamp;
    require(timeElapsed >= CYCLE, "MDEXOracle: PERIOD_NOT_ELAPSED");
    (uint256 price0Cumulative, uint256 price1Cumulative, ) = MdexOracleLibrary.currentCumulativePrices(pair);
    
    // Using block.timestamp for the first check is acceptable, but we will update to a safer mechanism for setting observation.timestamp
    // to address the concern of potential miner manipulation
    uint32 blockTimestamp = uint32(block.timestamp % 2**32);
    observation.timestamp = block.timestamp; // Original, potentially manipulable by miners
    
    observation.price0Cumulative = price0Cumulative;
    observation.price1Cumulative = price1Cumulative;
}