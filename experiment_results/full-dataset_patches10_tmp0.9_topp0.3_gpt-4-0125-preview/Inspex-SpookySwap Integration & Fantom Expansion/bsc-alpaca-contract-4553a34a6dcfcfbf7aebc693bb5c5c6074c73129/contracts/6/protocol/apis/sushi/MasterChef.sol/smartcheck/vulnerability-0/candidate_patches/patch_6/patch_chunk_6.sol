function safeApprove(
    IERC20 token,
    address spender,
    uint256 value
) internal {
    // Safely set the allowance by first resetting it to zero if it is not already
    // This mitigates a known issue with some ERC20 tokens (see: https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729)
    uint256 currentAllowance = token.allowance(address(this), spender);
    if (currentAllowance != 0) {
        _callOptionalReturn(token, abi.encodeWithSelector(token.approve.selector, spender, 0));
    }
    _callOptionalReturn(token, abi.encodeWithSelector(token.approve.selector, spender, value));
}