function buyFrom(address _from) public payable {
  _from = plasmaOf(_from);
  address _to = senderPlasma();
  require(_to != address(0), "Invalid recipient address");
  
  bool isRecipientNew = balanceOf(_to) == 0;
  if (isRecipientNew) {
    transferFromInternal(_from, _to, 1);
  }

  // Reentrancy guard state change
  if (isRecipientNew) {
    buyProduct();
  }
}