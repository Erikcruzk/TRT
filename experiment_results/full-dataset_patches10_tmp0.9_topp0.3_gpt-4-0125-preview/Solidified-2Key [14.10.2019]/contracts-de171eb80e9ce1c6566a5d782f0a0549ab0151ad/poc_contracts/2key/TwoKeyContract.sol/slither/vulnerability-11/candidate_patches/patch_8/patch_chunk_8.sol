function buyProduct() public payable {
  // Initialize reentrancy guard
  require(!locked, "Reentrant call detected!");
  locked = true;

  // caluclate the number of units being purchased
  uint _units = msg.value.div(cost);
  require(msg.value == cost * _units, "ethere sent does not divide equally into units");

  // bounty is the cost of a single token. Compute the bounty for the units
  // we are buying
  uint256 _bounty = bounty.mul(_units);

  buyProductInternal(_units, _bounty);

  _total_units = _total_units.sub(_units);

  // Reset reentrancy guard
  locked = false;
}