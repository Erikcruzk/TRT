function sellTokens(uint256 _tokenAmount) public onlyAlive {
    require(token.allowance(msg.sender, address(this)) >= _tokenAmount, "Token allowance too low");
    require(token.transferFrom(msg.sender, address(this), _tokenAmount), "Failed to transfer tokens");

    uint256 weiAmount = _getWeiAmount(_tokenAmount);
    require(address(this).balance >= weiAmount, "Insufficient contract balance");

    weiRaised = weiRaised.sub(weiAmount);
    emit TokenSell(msg.sender, wallet, weiAmount, _tokenAmount);

    msg.sender.transfer(weiAmount);
}