function executeProposal(
    uint proposalNumber,
    bytes transactionBytecode
)
public
{
    Proposal storage p = proposals[proposalNumber];

    require(
         !p.executed                                                         
        && p.proposalHash == keccak256(abi.encodePacked(p.recipient, p.amount, transactionBytecode))  
        && p.numberOfVotes >= minimumQuorum.sub(1) 

        && uint(p.currentResult) >= maxVotingPower.mul(51).div(100)
        && p.currentResult > 0
    );

    
    p.executed = true; 
    p.recipient.transfer(p.amount); // Changed from call.value to transfer for preventing re-entrancy
    p.proposalPassed = true;

    
    emit ProposalTallied(proposalNumber, p.currentResult, p.numberOfVotes, p.proposalPassed);
}