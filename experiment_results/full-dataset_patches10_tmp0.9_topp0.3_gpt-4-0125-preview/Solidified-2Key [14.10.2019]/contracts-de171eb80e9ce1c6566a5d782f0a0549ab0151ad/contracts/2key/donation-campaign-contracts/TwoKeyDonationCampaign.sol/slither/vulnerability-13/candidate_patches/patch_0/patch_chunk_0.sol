function buyTokensAndDistributeReferrerRewards(
    uint256 _maxReferralRewardETHWei,
    address _converter,
    uint _conversionId
)
public
returns (uint)
{
    require(msg.sender == twoKeyDonationConversionHandler);
    //Fiat rewards = fiatamount * moderatorPercentage / 100 / 0.095
    uint totalBounty2keys;
    //If fiat conversion do exactly the same just send different reward and don't buy tokens, take them from contract
    if(maxReferralRewardPercent > 0) {
        //Buy tokens from upgradable exchange
        totalBounty2keys = buyTokensFromUpgradableExchange(_maxReferralRewardETHWei, address(this));
        reservedAmount2keyForRewards = reservedAmount2keyForRewards.add(totalBounty2keys);
        //Handle refchain rewards
        ITwoKeyDonationLogicHandler(twoKeyDonationLogicHandler).updateRefchainRewards(
            _maxReferralRewardETHWei,
            _converter,
            _conversionId,
            totalBounty2keys);
    }
    return totalBounty2keys;
}