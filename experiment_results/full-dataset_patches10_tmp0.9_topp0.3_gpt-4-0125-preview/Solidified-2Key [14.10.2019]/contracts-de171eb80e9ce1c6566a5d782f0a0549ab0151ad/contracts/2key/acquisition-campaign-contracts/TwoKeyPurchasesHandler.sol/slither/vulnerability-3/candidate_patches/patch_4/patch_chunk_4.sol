function withdrawTokens(
    uint conversionId,
    uint portion
)
public
{
    Purchase storage p = conversionIdToPurchase[conversionId];

    require(msg.sender == p.converter || ITwoKeyEventSource(twoKeyEventSource).isAddressMaintainer(msg.sender) == true, "Not allowed");
    require(!p.isPortionWithdrawn[portion] && block.timestamp > portionToUnlockingDate[portion], "Already withdrawn or not yet unlocked");

    bool transferSuccess = IERC20(assetContractERC20).transfer(p.converter, p.portionAmounts[portion]);
    require(transferSuccess, "Transfer failed");

    p.isPortionWithdrawn[portion] = true;

    emit TokensWithdrawn (
        block.timestamp,
        msg.sender,
        p.converter, // Changed from "converter" to use the correct local variable "p.converter"
        portion,
        p.portionAmounts[portion]
    );
}