function _checkOnERC721Received(
    address from,
    address to,
    uint256 tokenId,
    bytes memory data
)
    private
    returns (bool)
{
    if (to.isContract()) {
        (bool success, bytes memory returndata) = to.call(abi.encodeWithSelector(
            IERC721Receiver(to).onERC721Received.selector,
            _msgSender(),
            from,
            tokenId,
            data
        ));
        if (success) {
            bytes4 retval = abi.decode(returndata, (bytes4));
            return retval == IERC721Receiver.onERC721Received.selector;
        }
        return false;
    } else {
        return true;
    }
}