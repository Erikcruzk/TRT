function _setInterestRateModel(InterestRateModel newInterestRateModel) public returns (uint) {
    // Ensure the call to accrueInterest() is the first thing in the function to prevent reentrancy
    uint error = accrueInterest();
    if (error != uint(Error.NO_ERROR)) {
        // accrueInterest emits logs on errors, but on top of that we want to log the fact that an attempted change of interest rate model failed
        return fail(Error(error), FailureInfo.SET_INTEREST_RATE_MODEL_ACCRUE_INTEREST_FAILED);
    }

    // _setInterestRateModelFresh emits interest-rate-model-update-specific logs on errors, so we don't need to.
    return _setInterestRateModelFresh(newInterestRateModel);
}