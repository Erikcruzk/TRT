function _setInterestRateModel(InterestRateModel newInterestRateModel) public returns (uint) {
    // Ensuring re-entrancy protection
    require(_notEntered, "re-entered");
    _notEntered = false;

    uint error = accrueInterest();
    if (error != uint(Error.NO_ERROR)) {
        // Reentrancy guard reset for early return
        _notEntered = true;
        return fail(Error(error), FailureInfo.SET_INTEREST_RATE_MODEL_ACCRUE_INTEREST_FAILED);
    }

    // Reentrancy guard reset to ensure function can be exited safely after state changes
    _notEntered = true;
    return _setInterestRateModelFresh(newInterestRateModel);
}