function _setInterestRateModel(InterestRateModel newInterestRateModel) public returns (uint) {
    // Ensure that this function is only called once to avoid reentrancy attack
    require(msg.sender == admin, "only the admin may set the interest rate model");
    require(accrueInterest() == uint(Error.NO_ERROR), "accrue interest failed");

    // Ensure the market is fresh
    if (accrualBlockNumber != getBlockNumber()) {
        return fail(Error.MARKET_NOT_FRESH, FailureInfo.SET_INTEREST_RATE_MODEL_FRESH_CHECK);
    }

    // Ensure the new model is the interest rate model
    require(newInterestRateModel.isInterestRateModel(), "marker method returned false");

    // Emit the event for changing the model
    emit NewMarketInterestRateModel(interestRateModel, newInterestRateModel);

    // Set the new interest model
    interestRateModel = newInterestRateModel;

    return uint(Error.NO_ERROR);
}