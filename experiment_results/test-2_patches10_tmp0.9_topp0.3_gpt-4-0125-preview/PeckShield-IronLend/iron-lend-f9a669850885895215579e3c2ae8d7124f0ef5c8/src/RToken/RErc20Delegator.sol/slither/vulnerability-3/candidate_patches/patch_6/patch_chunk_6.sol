function _setImplementation(address implementation_, bool allowResign, bytes memory becomeImplementationData) public {
    require(msg.sender == admin, "RErc20Delegator::_setImplementation: Caller must be admin");

    if (allowResign) {
        bytes memory data = abi.encodeWithSignature("_resignImplementation()");
        (bool success,) = implementation.delegatecall(data);
        require(success);
    }

    address oldImplementation = implementation;
    implementation = implementation_;

    {
        bytes memory data = abi.encodeWithSignature("_becomeImplementation(bytes)", becomeImplementationData);
        (bool success,) = implementation.delegatecall(data);
        require(success);
    }

    emit NewImplementation(oldImplementation, implementation);
}